<html lang="ml">

<head>
	<span id="headContainer"></span>
</head>

<body>
	<div class="loader" id="pageLoader">
		<div class="spinner"></div>
	</div>

	<span id="navbarContainer"></span>

	<section class="container py-3">
		<div id="book-list" class="row g-4"></div>
	</section>

	<span id="footerContainer"></span>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script src="assets/js/custom.js"></script>

	<script>
		const API_KEY = "$2y$10$B8yax3MxHEcXfplBYp94edFIjUBgKs05qwd08hZESA9C9NHtAwP6";

		document.addEventListener("DOMContentLoaded", () => {
			document.title = "ഹദിത്ത്";
			const loader = document.getElementById("pageLoader");
			const bookList = document.getElementById("book-list");

			fetch(`https://www.hadithapi.com/api/books?apiKey=${API_KEY}`)
				.then(res => res.json())
				.then(({ status, books }) => {
					if (status !== 200 || !Array.isArray(books)) {
						console.error("Unexpected API response");
						loader.style.display = "none";
						return;
					}

					books
						.filter(book => book.hadiths_count > 0)
						.forEach(book => {
							const card = document.createElement("div");
							card.className = "col-lg-3 col-md-6 col-12";
							card.innerHTML = `
								<div class="index-card p-3 text-center d-flex flex-column justify-content-between h-100">
									<div>
									<div class="small text-uppercase opacity-75 mb-1">${book.bookSlug}</div>
									<h4 class="book-title fw-bold">${book.bookName}</h4>
									<div class="fst-italic small mt-1">
										${book.writerName || "Unknown"} <span class="opacity-75">(${book.writerDeath || "N/A"})</span>
									</div>
									<div class="small">
										<span class="fw-bold">${book.hadiths_count}</span> Hadiths |
										<span class="fw-bold">${book.chapters_count}</span> Chapters
									</div>
									</div>
									<div class="mt-4">
									<a href="hadith-chapters.html?book=${book.bookSlug}" class="btn btn-primary w-100 fw-bold">
										View Chapters
									</a>
									</div>
								</div>
							`;
							bookList.appendChild(card);
						});

					loader.style.display = "none";
				})
				.catch(err => {
					console.error("Error loading books:", err);
					loader.style.display = "none";
				});
		});
	</script>

</body>

</html>